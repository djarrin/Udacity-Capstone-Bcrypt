---
- name: Start MiniKube
  shell: |
    cd /home/ubuntu/
    sudo minikube start --vm-driver=none
    sudo mv /home/ubuntu/.kube /home/ubuntu/.minikube $HOME
    sudo chown -R $USER $HOME/.kube $HOME/.minikube

- name: Run Kubernetes
  shell: |
    cd /home/ubuntu/
    kubectl run application --image=djarrin/bcrypt-image

- name: Wait for Kubernetes to Start Up
  pause:
    minutes: 3

- name: Forward Kubernetes Ports
  shell: |
    cd /home/ubuntu/
    kubectl get pods --all-namespaces
    kubectl port-forward application 8000:80
